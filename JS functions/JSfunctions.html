<html>
<head>
	<script type="text/javascript">
		function boto1()
		{
			console.log("Aqui comença la primera");
			console.log("Crido a la segona desde principal");
			segona();
			console.log("Acabo de cridar a la segona desde principal");
			console.log("Crido a la tercera desde principal");
			tercera();
			console.log("Acabo de cridar a la segona desde principal");
			console.log("Acabo la principal");

		}

		function segona()
		{
			console.log("	Aqui comença la segona");
			console.log("	Entro al bucle");
			var suma=0;
			for (var i = 0; i <1000000000; i++) {
				suma+=i;
			};
			console.log("	Surto al bucle");
			console.log("	Acabo la segona");
		}
		function tercera()
		{
			console.log("	Aqui comença la tercera");
			console.log("	Entro al bucle");
			var suma=0;
			for (var i = 0; i <1000000000; i++) {
				suma+=i;
			};
			console.log("	Surto al bucle");
			console.log("	Acabo la tercera");
		}

		function cuarta()
		{
			console.log("Aqui comença la cuarta");
			console.log("");
		}

		function ambCallback(callback)
		{
			callback();
		}

		function boto2()
		{
			console.log("Aqui comença la primera");
			var num = Math.floor(Math.random() * 100);
			if((num%2)==0)
			{
				console.log("Crido a la segona desde principal");
				ambCallback(function segona()
				{
					console.log("	Aqui comença la segona");
					console.log("	Entro al bucle");
					var suma=0;
					for (var i = 0; i <1000000000; i++) {
						suma+=i;
					};
					console.log("	Surto al bucle");
					console.log("	Acabo la segona");
				});
				console.log("Acabo de cridar a la segona desde principal");
			}
			else
			{
				console.log("Crido a la tercera desde principal");
				ambCallback(function tercera()
				{
					console.log("	Aqui comença la tercera");
					console.log("	Entro al bucle");
					var suma=0;
					for (var i = 0; i <1000000000; i++) {
						suma+=i;
					};
					console.log("	Surto al bucle");
					console.log("	Acabo la tercera");
				});
				console.log("Acabo de cridar a la tercera desde principal");
			}
			var num = Math.floor(Math.random() * 100);
			if((num%2)==0)
			{
				console.log("Crido a la segona desde principal");
				ambCallback(function segona()
				{
					console.log("	Aqui comença la segona");
					console.log("	Entro al bucle");
					var suma=0;
					for (var i = 0; i <1000000000; i++) {
						suma+=i;
					};
					console.log("	Surto al bucle");
					console.log("	Acabo la segona");
				});
				console.log("Acabo de cridar a la segona desde principal");
			}
			else
			{
				console.log("Crido a la tercera desde principal");
				ambCallback(function tercera()
				{
					console.log("	Aqui comença la tercera");
					console.log("	Entro al bucle");
					var suma=0;
					for (var i = 0; i <1000000000; i++) {
						suma+=i;
					};
					console.log("	Surto al bucle");
					console.log("	Acabo la tercera");
				});
				console.log("Acabo de cridar a la tercera desde principal");
			}
			console.log("Acabo la principal");
		}

		function segonaDif(callback)
		{
			console.log("Estic a la seogna");
			console.log("Preparo el llançament de la cuarta");
			setTimeout(callback,5000);
			console.log("Acabo la segona");
		}
		function cuarta()
		{
			console.log("Entro a la cuarta");
			alert("estic a la cuarta");
			console.log("Acabo la cuarta");
		}

		function boto3()
		{
			console.log("Aqui comença la primera");
			console.log("Vaig a cridar a la segona desde principal");
			segonaDif(function cuarta()
			{
				console.log("Entro a la cuarta");
				alert("estic a la cuarta");
				console.log("Acabo la cuarta");
			});
			console.log("Acabo de cridar a la segona desde principal");
			console.log("Acabo la principal");
		}
	</script>
</head>
<body onload="">
	<div id="suma"></div>
	<button id="bot" onclick="boto1()">1er boton</button>

	<button id="bot" onclick="boto2()">2do boton</button>

	<button id="bot" onclick="boto3()">3er boton</button>
</body>
</body>
</html>